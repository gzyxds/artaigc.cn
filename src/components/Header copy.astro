---
/**
 * Header组件 (Bento Grid / Linear Style)
 * 网站的顶部导航栏组件，提供网站的主要导航功能
 * 
 * 风格重构：
 * - 移除所有圆角 (rounded-none)
 * - 使用边框代替阴影 (border-first)
 * - 引入 font-mono 增强技术感
 * - 极简主义设计
 */

const allPages = [
  { text: "常见问题", url: "/faqs" },
  { text: "更新日志", url: "/changelog" },
  { text: "集成", url: "/integrations" },
];

import astroLogo from '../assets/logo.svg';

type IconKey = 'user' | 'brain' | 'chat' | 'edit' | 'target' | 'monitor' | 'lightbulb' | 'shield';

const svgIcons: Record<IconKey, string> = {
  user: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>`,
  brain: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2a3 3 0 0 0-3 3 3 3 0 0 0-3 3v1a3 3 0 0 0 3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0 3-3V8a3 3 0 0 0-3-3 3 3 0 0 0-3-3z"/></svg>`,
  chat: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>`,
  edit: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>`,
  target: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/></svg>`,
  monitor: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="3" width="20" height="14" rx="2" ry="2"/><line x1="8" y1="21" x2="16" y2="21"/><line x1="12" y1="17" x2="12" y2="21"/></svg>`,
  lightbulb: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 21h6"/><path d="M12 17v4"/><path d="M12 3a6 6 0 0 1 6 6c0 3-2 5.5-2 8H8c0-2.5-2-5-2-8a6 6 0 0 1 6-6z"/></svg>`,
  shield: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>`
};

interface MenuItem {
  name: string;
  url: string;
  icon: IconKey;
  desc: string;
  color: string;
  target?: string;
}

const products: MenuItem[] = [
  { name: "数字分身", url: "/human", icon: "user", desc: "智能数字人解决方案", color: "blue" },
  { name: "全能知识库", url: "/ai", icon: "lightbulb", desc: "企业级全能AI平台", color: "green" },
  { name: "聊天绘画", url: "/chat", icon: "chat", desc: "智能对话与创作", color: "purple" },
  { name: "论文创作", url: "/paper", icon: "edit", desc: "智能论文写作助手", color: "orange" },
  { name: "产品中心", url: "/shop", icon: "target", desc: "全部产品导航", color: "pink" },
  { name: "产品演示", url: "/demo", icon: "monitor", desc: "在线体验中心", color: "orange" },
  { name: "AI提示词", url: "/tips", icon: "lightbulb", desc: "AI提示词大全", color: "orange" },
  { name: "授权中心", url: "http://auth.cnai.art", icon: "shield", desc: "授权管理与使用", color: "orange", target: "_blank" },
];

const supportItems: MenuItem[] = [
  { name: "更新日志", url: "/changelog", icon: "shield", desc: "获取最新更新", color: "teal" },
  { name: "联系我们", url: "/contact", icon: "chat", desc: "获取专业支持服务", color: "indigo" },
  { name: "集成与API", url: "/integrations", icon: "monitor", desc: "连接您喜爱的工具", color: "blue" },
  { name: "合作伙伴", url: "/cooperate", icon: "user", desc: "查看合作机会", color: "yellow" },
  { name: "渠道合作", url: "/channel", icon: "target", desc: "渠道合作与加盟", color: "yellow" },
  { name: "APP下载", url: "/app", icon: "lightbulb", desc: "多终端APP下载", color: "green" },
];

const docItems: MenuItem[] = [
  { name: "项目文档", url: "https://doc.artaigc.cn/", icon: "lightbulb", desc: "5分钟快速上手", color: "red", target: "_blank" },
  { name: "飞书文档", url: "https://rwm01l8tn3x.feishu.cn/wiki/VqNCwBO0KiqWIWkSfdHcDigGnZg?from=from_copylink", icon: "monitor", desc: "详细功能说明", color: "blue" },
  { name: "数字分身", url: "https://doc.artaigc.cn/human/", icon: "user", desc: "数字人部署文档", color: "green" },
  { name: "全能知识库", url: "https://doc.artaigc.cn/work/deployment/demo.html", icon: "brain", desc: "企业知识库数文档", color: "purple" },
  { name: "聊天绘画", url: "https://doc.artaigc.cn/chat/", icon: "chat", desc: "聊天绘画企业知识库数文档", color: "yellow" },
  { name: "论文创作", url: "https://doc.artaigc.cn/Paper/deployment/bt.html", icon: "edit", desc: "论文创作文档", color: "yellow" },
];

const faqItems: MenuItem[] = [
  { name: "使用指南", url: "/faqs/guide", icon: "lightbulb", desc: "产品使用教程", color: "blue" },
  { name: "支付问题", url: "/faqs/payment", icon: "target", desc: "支付方式与发票", color: "green" },
  { name: "技术支持", url: "/faqs/support", icon: "shield", desc: "技术支持服务", color: "purple" },
  { name: "API问题", url: "/faqs/api", icon: "monitor", desc: "接口使用问题", color: "orange" },
  { name: "账号问题", url: "/faqs/account", icon: "user", desc: "账号管理指南", color: "red" }
];
---

<header class="sticky top-0 z-50 w-full bg-white/80 dark:bg-gray-900/80 backdrop-blur-md border-b border-gray-200 dark:border-gray-800 transition-all duration-300">
  <div class="container mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex h-16 items-center justify-between">
      <!-- Logo -->
      <div class="flex items-center">
        <a href="/" class="flex items-center relative group">
          <div class="p-1 border border-transparent group-hover:border-blue-500/30 transition-colors duration-300">
            <img src={astroLogo.src} alt="艺创AI Logo" class="h-8 w-8" />
          </div>
          <span class="ml-3 text-xl font-bold font-mono tracking-tight" style="color: rgba(32, 90, 239, 1);">
            ART.AI
          </span>
       </a>
      </div>

      <!-- Desktop Navigation -->
      <nav class="hidden xl:flex xl:items-center xl:space-x-1">
        <a href="/" class="nav-link">首页</a>
        
        <!-- Products Dropdown -->
        <div class="relative group">
          <button class="nav-link flex items-center gap-1">
            产品中心
            <svg class="h-3 w-3 transition-transform duration-200 group-hover:rotate-180" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
            </svg>
          </button>
          <div class="absolute left-0 mt-0 w-[500px] bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 shadow-none opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 transform origin-top-left z-50">
            <div class="corner-marker top-0 right-0 border-t border-r rounded-bl-none w-2 h-2"></div>
            <div class="corner-marker bottom-0 left-0 border-b border-l rounded-tr-none w-2 h-2"></div>
            
            <div class="p-4">
              <div class="grid grid-cols-2 gap-0">
                {products.map((product) => (
                  <a href={product.url} class="menu-item group/item border border-transparent hover:border-gray-100 dark:hover:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-800/50">
                    <div class="flex items-center space-x-3 p-2 transition-all duration-200">
                      <span class={`flex h-8 w-8 items-center justify-center rounded-none bg-${product.color}-50 dark:bg-${product.color}-900/20 text-${product.color}-600 dark:text-${product.color}-400 border border-${product.color}-100 dark:border-${product.color}-800 group-hover/item:scale-105 transition-transform duration-300`}>
                        <span class="w-4 h-4" set:html={svgIcons[product.icon]}></span>
                      </span>
                      <div class="flex-1 min-w-0">
                        <div class="font-bold text-sm font-mono text-gray-900 dark:text-gray-100 group-hover/item:text-primary-600 dark:group-hover/item:text-primary-400 transition-colors duration-200">
                          {product.name}
                        </div>
                        <div class="text-[10px] text-gray-500 dark:text-gray-400 truncate font-mono mt-0.5">
                          {product.desc}
                        </div>
                      </div>
                    </div>
                  </a>
                ))}
              </div>
            </div>
          </div>
        </div>

        <!--产品文档  -->
        <div class="relative group">
          <button class="nav-link flex items-center gap-1">
            产品文档
            <svg class="h-3 w-3 transition-transform duration-200 group-hover:rotate-180" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
            </svg>
          </button>
          <div class="absolute left-0 mt-0 w-[500px] bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 shadow-none opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 transform origin-top-left z-50">
             <div class="corner-marker top-0 right-0 border-t border-r rounded-bl-none w-2 h-2"></div>
             <div class="corner-marker bottom-0 left-0 border-b border-l rounded-tr-none w-2 h-2"></div>

            <div class="p-4">
              <div class="grid grid-cols-2 gap-0">
                {docItems.map((item) => (
                  <a href={item.url} target={item.target} class="menu-item group/item border border-transparent hover:border-gray-100 dark:hover:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-800/50">
                    <div class="flex items-center space-x-3 p-2 transition-all duration-200">
                      <span class={`flex h-8 w-8 items-center justify-center rounded-none bg-${item.color}-50 dark:bg-${item.color}-900/20 text-${item.color}-600 dark:text-${item.color}-400 border border-${item.color}-100 dark:border-${item.color}-800 group-hover/item:scale-105 transition-transform duration-300`}>
                        <span class="w-4 h-4" set:html={svgIcons[item.icon]}></span>
                      </span>
                      <div class="flex-1 min-w-0">
                        <div class="font-bold text-sm font-mono text-gray-900 dark:text-gray-100 group-hover/item:text-primary-600 dark:group-hover/item:text-primary-400 transition-colors duration-200">
                          {item.name}
                        </div>
                        <div class="text-[10px] text-gray-500 dark:text-gray-400 truncate font-mono mt-0.5">
                          {item.desc}
                        </div>
                      </div>
                    </div>
                  </a>
                ))}
              </div>
            </div>
          </div>
        </div>

        <a href="/pricing" class="nav-link">产品价格</a>
        <a href="/company" class="nav-link">关于我们</a>
        <a href="/contact" class="nav-link">联系我们</a>

        <!-- Support Dropdown -->
        <div class="relative group">
          <button class="nav-link flex items-center gap-1">
            支持与服务
            <svg class="h-3 w-3 transition-transform duration-200 group-hover:rotate-180" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
            </svg>
          </button>
          <div class="absolute left-0 mt-0 w-[500px] bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 shadow-none opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 transform origin-top-left z-50">
            <div class="corner-marker top-0 right-0 border-t border-r rounded-bl-none w-2 h-2"></div>
            <div class="corner-marker bottom-0 left-0 border-b border-l rounded-tr-none w-2 h-2"></div>
            
            <div class="p-4">
              <div class="grid grid-cols-2 gap-0">
                {supportItems.map((item) => (
                  <a href={item.url} class="menu-item group/item border border-transparent hover:border-gray-100 dark:hover:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-800/50">
                    <div class="flex items-center space-x-3 p-2 transition-all duration-200">
                      <span class={`flex h-8 w-8 items-center justify-center rounded-none bg-${item.color}-50 dark:bg-${item.color}-900/20 text-${item.color}-600 dark:text-${item.color}-400 border border-${item.color}-100 dark:border-${item.color}-800 group-hover/item:scale-105 transition-transform duration-300`}>
                        <span class="w-4 h-4" set:html={svgIcons[item.icon]}></span>
                      </span>
                      <div class="flex-1 min-w-0">
                        <div class="font-bold text-sm font-mono text-gray-900 dark:text-gray-100 group-hover/item:text-primary-600 dark:group-hover/item:text-primary-400 transition-colors duration-200">
                          {item.name}
                        </div>
                        <div class="text-[10px] text-gray-500 dark:text-gray-400 truncate font-mono mt-0.5">
                          {item.desc}
                        </div>
                      </div>
                    </div>
                  </a>
                ))}
              </div>
            </div>
          </div>
        </div>
        <a href="/blog" class="nav-link">最新动态</a>
      </nav>

      <!-- Right Side Actions -->
      <div class="flex items-center space-x-3">
        <!-- Dark Mode Toggle -->
        <button 
          x-on:click="darkMode = !darkMode"
          class="p-2 rounded-none border border-transparent hover:border-gray-200 dark:hover:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800 transition-all duration-200"
          aria-label="切换暗黑模式"
        >
          <svg x-show="!darkMode" class="h-5 w-5 text-gray-600 dark:text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
          </svg>
          <svg x-show="darkMode" class="h-5 w-5 text-gray-600 dark:text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
          </svg>
        </button>

        <!-- Auth Buttons -->
        <div class="flex flex-wrap justify-center xl:justify-start gap-0 border border-gray-200 dark:border-gray-700 divide-x divide-gray-200 dark:divide-gray-700 hidden sm:flex">
          <a 
            href="https://auth.cnai.art/regist.htm"
            target="_blank"
            rel="noopener noreferrer"
            class="group hidden sm:inline-flex items-center px-4 py-2 bg-white dark:bg-gray-900 text-gray-900 dark:text-white hover:bg-gray-50 dark:hover:bg-gray-800 transition-all font-mono text-sm font-medium"
          >
            <span>登入</span>
          </a>
          <a 
            href="https://auth.cnai.art/regist.htm"
            target="_blank"
            rel="noopener noreferrer"
            class="group hidden sm:inline-flex items-center px-4 py-2 bg-blue-600 text-white hover:bg-blue-700 transition-all font-mono text-sm font-medium"
          >
            <span>立即购买</span>
          </a>
        </div>
        
        <!-- Mobile Menu Button -->
        <button 
          x-data="{open: false}"
          x-on:click="open = !open; $dispatch('toggle-mobile-menu', {open})"
          class="xl:hidden p-2 rounded-none border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors duration-200"
          aria-label="切换菜单"
        >
          <svg x-bind:class="{'hidden': open, 'block': !open}" class="h-6 w-6 text-gray-600 dark:text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
          </svg>
          <svg x-bind:class="{'block': open, 'hidden': !open}" class="h-6 w-6 text-gray-600 dark:text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
          </svg>
        </button>
      </div>
    </div>
  </div>

  <!-- Mobile Menu -->
  <div 
    x-data="{ open: false }"
    x-on:toggle-mobile-menu.window="open = $event.detail.open"
    x-show="open"
    x-transition:enter="transition ease-out duration-200"
    x-transition:enter-start="opacity-0 -translate-y-4"
    x-transition:enter-end="opacity-100 translate-y-0"
    x-transition:leave="transition ease-in duration-150"
    x-transition:leave-start="opacity-100 translate-y-0"
    x-transition:leave-end="opacity-0 -translate-y-4"
    class="xl:hidden fixed inset-x-0 top-16 z-50 w-full overflow-hidden bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-800"
    x-cloak
  >
    <nav class="relative max-h-[calc(100vh-4rem)] overflow-y-auto p-4 space-y-2">
      <div class="space-y-1">
        <a href="/" class="mobile-nav-item">首页</a>
        
        <!-- Mobile Products Menu -->
        <div x-data="{expanded: false}" class="space-y-0">
          <button 
            x-on:click="expanded = !expanded"
            class="mobile-nav-item w-full flex items-center justify-between group"
          >
            <span x-bind:class="{'text-blue-600 dark:text-blue-400': expanded}">产品中心</span>
            <svg 
              x-bind:class="{'rotate-180 text-blue-600 dark:text-blue-400': expanded}"
              class="h-4 w-4 transition-all duration-200" 
              fill="none" viewBox="0 0 24 24" stroke="currentColor"
            >
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
            </svg>
          </button>
          
          <div x-show="expanded" x-collapse x-cloak>
            <div class="pl-4 border-l border-gray-200 dark:border-gray-800 ml-4 my-2">
              <div class="grid grid-cols-1 gap-1">
                {products.map(product => (
                  <a href={product.url} class="mobile-menu-item">
                    <div class="flex items-center space-x-3">
                      <span class={`w-4 h-4 text-${product.color}-600 dark:text-${product.color}-400`} set:html={svgIcons[product.icon]}></span>
                      <span class="font-mono text-sm">{product.name}</span>
                    </div>
                  </a>
                ))}
              </div>
            </div>
          </div>
        </div>

        <!-- Mobile Documentation Menu -->
        <div x-data="{expanded: false}" class="space-y-0">
          <button 
            x-on:click="expanded = !expanded"
            class="mobile-nav-item w-full flex items-center justify-between group"
          >
            <span x-bind:class="{'text-blue-600 dark:text-blue-400': expanded}">产品文档</span>
            <svg 
              x-bind:class="{'rotate-180 text-blue-600 dark:text-blue-400': expanded}"
              class="h-4 w-4 transition-all duration-200" 
              fill="none" viewBox="0 0 24 24" stroke="currentColor"
            >
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
            </svg>
          </button>
          
          <div x-show="expanded" x-collapse x-cloak>
            <div class="pl-4 border-l border-gray-200 dark:border-gray-800 ml-4 my-2">
              <div class="grid grid-cols-1 gap-1">
                {docItems.map(item => (
                  <a href={item.url} target={item.target} class="mobile-menu-item">
                    <div class="flex items-center space-x-3">
                      <span class={`w-4 h-4 text-${item.color}-600 dark:text-${item.color}-400`} set:html={svgIcons[item.icon]}></span>
                      <span class="font-mono text-sm">{item.name}</span>
                    </div>
                  </a>
                ))}
              </div>
            </div>
          </div>
        </div>

        <a href="/pricing" class="mobile-nav-item">产品价格</a>
        <a href="/company" class="mobile-nav-item">关于我们</a>
        <a href="/contact" class="mobile-nav-item">联系我们</a>

        <!-- Mobile Support Menu -->
        <div x-data="{expanded: false}" class="space-y-0">
          <button 
            x-on:click="expanded = !expanded"
            class="mobile-nav-item w-full flex items-center justify-between group"
          >
            <span x-bind:class="{'text-blue-600 dark:text-blue-400': expanded}">支持与服务</span>
            <svg 
              x-bind:class="{'rotate-180 text-blue-600 dark:text-blue-400': expanded}"
              class="h-4 w-4 transition-all duration-200" 
              fill="none" viewBox="0 0 24 24" stroke="currentColor"
            >
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
            </svg>
          </button>
          
          <div x-show="expanded" x-collapse x-cloak>
            <div class="pl-4 border-l border-gray-200 dark:border-gray-800 ml-4 my-2">
              <div class="grid grid-cols-1 gap-1">
                {supportItems.map(item => (
                  <a href={item.url} class="mobile-menu-item">
                    <div class="flex items-center space-x-3">
                      <span class={`w-4 h-4 text-${item.color}-600 dark:text-${item.color}-400`} set:html={svgIcons[item.icon]}></span>
                      <span class="font-mono text-sm">{item.name}</span>
                    </div>
                  </a>
                ))}
              </div>
            </div>
          </div>
        </div>
        <a href="/blog" class="mobile-nav-item">最新动态</a>
      </div>

      <!-- Mobile Auth Buttons -->
      <div class="pt-6 grid grid-cols-2 gap-4">
        <a 
          href="https://auth.cnai.art/regist.htm" 
          class="flex items-center justify-center px-4 py-3 rounded-none bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 text-gray-900 dark:text-white font-mono text-sm hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200"
        >
          登录
        </a>
        <a 
          href="https://auth.cnai.art/regist.htm" 
          class="flex items-center justify-center px-4 py-3 rounded-none bg-blue-600 hover:bg-blue-700 text-white font-mono text-sm transition-colors duration-200"
        >
          立即购买
        </a>
      </div>
    </nav>
  </div>
</header>

<style>
  .nav-link {
    @apply px-3 py-2 rounded-none text-sm font-medium text-gray-600 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-200 font-mono;
  }

  .menu-item {
    @apply block rounded-none transition-colors duration-200;
  }

  .mobile-nav-item {
    @apply flex items-center justify-between w-full px-4 py-3 rounded-none text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors duration-200 font-medium font-mono border-l-2 border-transparent hover:border-blue-600;
  }

  .mobile-menu-item {
    @apply flex items-center w-full px-4 py-2 rounded-none text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors duration-200;
  }

  [x-cloak] { 
    display: none !important; 
  }
</style>

<script is:inline>
  // 使用防抖函数优化滚动事件处理
  function debounce(func, wait) {
    let timeout;
    return function(...args) {
      clearTimeout(timeout);
      timeout = setTimeout(() => func.apply(this, args), wait);
    };
  }

  // 初始化变量
  let header;
  let ticking = false;

  // 滚动处理函数
  function handleScroll() {
    if (!header) header = document.querySelector('header');
    if (!header) return;
    
    const currentScrollY = window.scrollY;
    
    if (!ticking) {
      window.requestAnimationFrame(() => {
        if (currentScrollY > 10) {
          header.classList.add('border-gray-200', 'dark:border-gray-800');
          header.classList.remove('border-transparent');
        } else {
          // header.classList.remove('border-gray-200', 'dark:border-gray-800');
          // header.classList.add('border-transparent');
          // 保持边框始终存在以维持线性风格
        }
        
        ticking = false;
      });
      
      ticking = true;
    }
  }

  // 使用防抖优化滚动事件
  const debouncedScroll = debounce(handleScroll, 10);
  
  // 添加滚动事件监听
  window.addEventListener('scroll', debouncedScroll, { passive: true });
  
  // DOM加载完成后初始化
  document.addEventListener('DOMContentLoaded', () => {
    header = document.querySelector('header');
    handleScroll();
  });
  
  // 初始检查滚动位置
  handleScroll();
</script>
