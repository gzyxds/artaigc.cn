---
/**
 * ApplicationSystem 组件
 * 展示 智言AI 可搭建的各类 AI 应用系统
 * 风格：左右布局，左侧预览，右侧列表 (Interactive Tab System)
 */

/**
 * 系统功能数据接口定义
 */
interface SystemItem {
  id: string;
  icon: string;
  title: string;
  desc: string;
}

/**
 * 系统功能数据列表
 * 包含各类可搭建的 AI 系统信息
 */
const systems: SystemItem[] = [
  {
    id: 'chat-art',
    icon: 'palette',
    title: 'AI聊天绘画系统',
    desc: '基于 智言AI 可快速搭建集成全球所有顶级大语言模型并且兼容主流AIGC图片模型，具备智能对话，图片生成，用户管理，算力计费，会员订阅等模块的AI应用系统'
  },
  {
    id: 'enterprise-agent',
    icon: 'business_center',
    title: '企业智能体系统',
    desc: '基于 智言AI 可快速搭建企业级智能体，支持业务流程自动化、数据分析汇总、决策辅助，可对接企业现有系统，扩展权限分级管理，提升企业运营效率的AI应用系统'
  },
  {
    id: 'customer-service',
    icon: 'support_agent',
    title: '企业AI客服系统',
    desc: '基于 智言AI 可快速搭建集成多轮对话模型，支持7*24小时智能知识库应答、常见问题解答，可扩展工单流转与客户画像管理能力，降低企业客服运营成本的AI应用系统'
  },
  {
    id: 'comic-creation',
    icon: 'movie_filter',
    title: 'AI漫剧创意系统',
    desc: '基于 智言AI 可快速搭建支持剧本智能创作、角色形象生成、漫剧素材库管理，适配分镜设计与台词优化，显著降低漫剧创作门槛，适配个人创作者与工作室的AI应用系统'
  },
  {
    id: 'academic-paper',
    icon: 'school',
    title: 'AI论文学术系统',
    desc: '基于 智言AI 可快速搭建提供文献检索、论文框架构建、查重辅助与格式校对功能，集成学术大模型答疑和参考文献管理，助力科研人员提升论文撰写效率的AI应用系统'
  },
  {
    id: 'campus-assistant',
    icon: 'account_balance',
    title: 'AI校园助手系统',
    desc: '基于 智言AI 可快速搭建包含校园信息查询、选课咨询、成绩查询、校园导航等AI智能体功能，提升校园管理与服务效率的AI应用系统'
  },
  {
    id: 'agent-training',
    icon: 'model_training',
    title: '智能体在线实训系统',
    desc: '基于 智言AI 可快速搭建具备智能体开发模拟实训、大模型对话操练、知识库内容清洗、AI工作流搭建等功能，适配职业院校智能体实训教学需求的AI应用系统'
  },
  {
    id: 'industrial-inspection',
    icon: 'precision_manufacturing',
    title: 'AI工业质检辅助系统',
    desc: '基于 智言AI 可快速搭建集成高精度图像识别模型，支持电子元件、机械零件等多品类产品缺陷检测，自动生成详细质检报告，可对接生产线MES系统，提升质检精准度与生产流转效率的AI应用系统'
  },
  {
    id: 'ecommerce-assets',
    icon: 'shopping_bag',
    title: 'AI电商素材系统',
    desc: '基于 智言AI 可快速搭建支持全品类商品文案智能生成、主图/详情图多风格AIGC创作，可对接淘宝、京东等主流电商平台，大幅提升商品上架效率与转化潜力AI应用系统'
  },
  {
    id: 'travel-guide',
    icon: 'tour',
    title: 'AI文旅导览系统',
    desc: '基于 智言AI 可快速搭建提供多语言数字人智能语音导览、景点历史典故深度讲解、个性化行程规划建议，可扩展票务查询与预约功能，适配景区、博物馆、文旅综合体等多元场景，提升游客体验的AI应用系统'
  },
  {
    id: 'legal-docs',
    icon: 'gavel',
    title: 'AI法律文书系统',
    desc: '基于 智言AI 可快速搭建支持劳动合同、商业合同等多类型文书起草，精准检索相关法律条文，提供文书合规性审核与风险提示，集成法律大模型专业答疑，适配律所与企业法务高效办公的AI应用系统'
  },
  {
    id: 'medical-consult',
    icon: 'medical_services',
    title: 'AI医疗咨询系统',
    desc: '基于 智言AI 可快速搭建权威健康知识科普、常见症状初步问询与风险分级，给出针对性就医建议指导，可扩展个人健康档案与病历整理功能，适配医疗机构预检分诊与健康管理平台的AI应用系统'
  }
];
---

<section class="py-24 bg-surface border-t border-border relative overflow-hidden"
  x-data="{
    activeIndex: 0,
    rightHeight: 'auto',
    /**
     * 初始化函数
     * 设置高度监听与更新
     */
    init() {
      const updateHeight = () => {
        if (window.innerWidth >= 1024 && this.$refs.leftCol) {
          this.rightHeight = this.$refs.leftCol.offsetHeight + 'px';
        } else {
          this.rightHeight = '600px'; // Mobile fallback height or auto
        }
      };

      // Initial update
      this.$nextTick(() => updateHeight());

      // Observe resizing
      const observer = new ResizeObserver(() => updateHeight());
      if (this.$refs.leftCol) observer.observe(this.$refs.leftCol);

      window.addEventListener('resize', updateHeight);
    },
    /**
     * 滚动列表控制函数
     * @param {string} direction - 滚动方向 'up' | 'down'
     */
    scrollList(direction) {
      const container = this.$refs.scrollContainer;
      const scrollAmount = container.offsetHeight / 2;
      container.scrollBy({
        top: direction === 'up' ? -scrollAmount : scrollAmount,
        behavior: 'smooth'
      });
    }
  }"
>
  <!-- 背景网格装饰 -->
  <div class="absolute inset-0 bg-[linear-gradient(to_right,#80808008_1px,transparent_1px),linear-gradient(to_bottom,#80808008_1px,transparent_1px)] bg-[size:32px_32px] pointer-events-none"></div>

  <div class="container-custom relative z-10">
    {/* 标题区域 */}
    <div class="mb-16 max-w-4xl">
      <h2 class="text-[clamp(28px,2vw+0.5rem,36px)] font-bold text-neutral-900 dark:text-neutral-100 mb-6 tracking-tight leading-tight">
        使用 智言AI 可以积木式<br/>
        <span class="bg-clip-text text-transparent bg-gradient-to-r from-brand-600 to-blue-600">轻松搭建如下AI应用系统</span>
      </h2>
      <p class="text-[clamp(16px,0.8vw+0.5rem,18px)] text-neutral-600 dark:text-neutral-400 max-w-3xl leading-relaxed">
        智言AI 同样致力于在 AI 时代打造备受青睐的、可快速搭建 AI 应用系统的开源解决方案，让技术赋能业务创新。
      </p>
    </div>

    {/* 核心内容区：左右布局 */}
    <div class="grid grid-cols-1 lg:grid-cols-12 gap-8 items-start">

      {/* 左侧：静态图片预览区 (Sticky) */}
      <div class="lg:col-span-7 lg:sticky lg:top-8 order-2 lg:order-1" x-ref="leftCol">
        <div class="relative bg-background border border-border rounded-sm overflow-hidden aspect-[4/3] lg:aspect-[16/10] group">

          {/* 模拟浏览器/窗口头部 */}
          <div class="absolute top-0 left-0 right-0 h-10 bg-surface border-b border-border flex items-center px-4 gap-2 z-20">
            <div class="flex gap-1.5">
              <div class="w-2.5 h-2.5 rounded-full bg-neutral-300 dark:bg-neutral-600"></div>
              <div class="w-2.5 h-2.5 rounded-full bg-neutral-300 dark:bg-neutral-600"></div>
              <div class="w-2.5 h-2.5 rounded-full bg-neutral-300 dark:bg-neutral-600"></div>
            </div>
            <div class="flex-1 text-center">
              <div class="inline-block px-3 py-0.5 rounded-sm bg-background/50 text-[10px] text-neutral-400 font-mono border border-border/50">
                智言AI.system/dashboard
              </div>
            </div>
          </div>

          {/* 静态图片内容 */}
          <div class="absolute inset-0 pt-10 bg-background flex items-center justify-center p-6">
            <img
              :src="`/solution/demo${activeIndex + 1}.png`"
              alt="知识库系统预览"
              class="w-full h-full object-contain"
              loading="lazy"
            />
          </div>

          {/* 装饰性光晕 - 减弱 */}
          <div class="absolute -inset-1 bg-gradient-to-r from-brand-500/10 to-purple-500/10 blur-xl opacity-10 -z-10"></div>
        </div>
      </div>

      {/* 右侧：列表导航区 */}
      <div class="lg:col-span-5 order-1 lg:order-2 relative" :style="`height: ${rightHeight}`">

        {/* 滚动容器 */}
        <div
          x-ref="scrollContainer"
          class="flex flex-col gap-2 overflow-y-auto h-full scroll-smooth py-6 pr-12 pl-4 bg-surface/60 border border-border rounded-sm [&::-webkit-scrollbar]:hidden"
          style="scrollbar-width: none; -ms-overflow-style: none;"
        >
          {systems.map((system, index) => (
            <div
              role="button"
              tabindex="0"
              @click={`activeIndex = ${index}`}
              :class={`activeIndex === ${index}
                ? 'bg-surface border-l-2 border-l-brand-600 border-y border-r border-y-border border-r-border dark:border-brand-800/30'
                : 'bg-background border border-transparent hover:border-border hover:bg-surface'`}
              class="relative p-4 cursor-pointer transition-all duration-200 group rounded-sm shrink-0"
            >
              <div class="flex flex-col gap-1">
                <div class="flex items-center gap-3">
                  <div
                    :class={`activeIndex === ${index} ? 'text-brand-600 dark:text-brand-400' : 'text-neutral-400 group-hover:text-neutral-600 dark:group-hover:text-neutral-300'`}
                    class="transition-colors duration-200"
                  >
                    <i class="material-icons text-2xl">{system.icon}</i>
                  </div>
                  <h3
                    @mouseenter={`activeIndex = ${index}`}
                    :class={`activeIndex === ${index} ? 'font-semibold' : 'font-medium'`}
                    class="text-base text-neutral-900 dark:text-neutral-100 transition-colors duration-200"
                  >
                    {system.title}
                  </h3>
                </div>
                <p
                  :class={`activeIndex === ${index} ? 'text-neutral-600 dark:text-neutral-400' : 'text-neutral-500 dark:text-neutral-400'`}
                  class="text-sm leading-relaxed transition-colors duration-200 line-clamp-2"
                >
                  {system.desc}
                </p>
              </div>
            </div>
          ))}
        </div>

        {/* 悬浮箭头控制 - 顶部和底部居中 */}
        <div class="hidden lg:block">
          <button
            @click="scrollList('up')"
            class="absolute top-2 left-1/2 -translate-x-1/2 z-20 w-8 h-8 rounded-sm bg-background/90 dark:bg-neutral-900/80 backdrop-blur-sm border border-border flex items-center justify-center text-neutral-500 hover:text-brand-600 hover:border-brand-500 transition-all active:scale-95"
            aria-label="Scroll Up"
          >
            <i class="material-icons text-lg">keyboard_arrow_up</i>
          </button>
          <button
            @click="scrollList('down')"
            class="absolute bottom-2 left-1/2 -translate-x-1/2 z-20 w-8 h-8 rounded-sm bg-background/90 dark:bg-neutral-900/80 backdrop-blur-sm border border-border flex items-center justify-center text-neutral-500 hover:text-brand-600 hover:border-brand-500 transition-all active:scale-95"
            aria-label="Scroll Down"
          >
            <i class="material-icons text-lg">keyboard_arrow_down</i>
          </button>
        </div>

      </div>

    </div>
  </div>
</section>
